change variable formats -> $ to ${}
refactor code
optimize code
